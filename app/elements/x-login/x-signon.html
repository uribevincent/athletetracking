<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<dom-module id="x-signon">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }


      span,
      input {
        @apply(--paper-font-body2);
      }
    </style>

    <span class="page-title"></span>
    <form  is="iron-form" id="form" >
 <paper-input name="email" label="Email" value="{{email}}" required></paper-input>
 <paper-input name="password" label="Mot de passe"  value="{{password}}" type="password"></paper-input>
 <paper-button raised on-tap="signon">Connexion</paper-button>
    </form>
</template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'x-signon',
        properties:{
        	email: String,
        	password: String
        },

 		signon: function() {
 			var ref = new Firebase(app.firebaseURL);
 			var email = this.email;
 			var pwd = this.password;
			ref.authWithPassword({
					email    : email,
					password : pwd
				}, function(error, authData) {
					if(!error){
						app.authData = authData;
    					app.isLogged = true;
						//redirect
						app.route = "/";
						console.log("Successfully created user account with uid:", authData.uid);
					}
				}, {
				  remember: "default"
				});
        }


      });
    })();
  </script>
</dom-module>
